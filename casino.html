<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–Ω–∏-–∫–∞–∑–∏–Ω–æ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #1a1a1a;
            color: white;
            text-align: center;
        }
        .slot-machine {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        .reel {
            width: 100px;
            height: 100px;
            background-color: #333;
            margin: 0 10px;
            font-size: 40px;
            line-height: 100px;
            border-radius: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 18px;
            background-color: #ffcc00;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        #balance {
            font-size: 24px;
            margin: 10px 0;
        }
        #result {
            font-size: 20px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h2>–ú–∏–Ω–∏-–∫–∞–∑–∏–Ω–æ: –°–ª–æ—Ç—ã</h2>
    <div id="balance">–ë–∞–ª–∞–Ω—Å: 1000 –º–æ–Ω–µ—Ç</div>
    <div class="slot-machine">
        <div id="reel1" class="reel">?</div>
        <div id="reel2" class="reel">?</div>
        <div id="reel3" class="reel">?</div>
    </div>
    <button id="spinButton" onclick="spin()">–ö—Ä—É—Ç–∏—Ç—å (10 –º–æ–Ω–µ—Ç)</button>
    <div id="result"></div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.ready();

        // –°–∏–º–≤–æ–ª—ã –¥–ª—è –±–∞—Ä–∞–±–∞–Ω–æ–≤
        const symbols = ["üçí", "üçã", "üçä", "üíé", "‚≠ê"];
        
        // –ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
        let balance = parseInt(localStorage.getItem("casinoBalance")) || 1000;
        document.getElementById("balance").innerText = `–ë–∞–ª–∞–Ω—Å: ${balance} –º–æ–Ω–µ—Ç`;

        // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const reels = [
            document.getElementById("reel1"),
            document.getElementById("reel2"),
            document.getElementById("reel3")
        ];
        const result = document.getElementById("result");
        const spinButton = document.getElementById("spinButton");

        // –§—É–Ω–∫—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è –±–∞—Ä–∞–±–∞–Ω–æ–≤
        function spin() {
            if (balance < 10) {
                result.innerText = "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!";
                spinButton.disabled = true;
                return;
            }

            balance -= 10;
            localStorage.setItem("casinoBalance", balance);
            document.getElementById("balance").innerText = `–ë–∞–ª–∞–Ω—Å: ${balance} –º–æ–Ω–µ—Ç`;
            spinButton.disabled = true;
            result.innerText = "–ö—Ä—É—Ç–∏–º...";

            // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è
            let spins = 0;
            const interval = setInterval(() => {
                reels.forEach(reel => {
                    reel.innerText = symbols[Math.floor(Math.random() * symbols.length)];
                });
                spins++;
                if (spins > 15) {
                    clearInterval(interval);
                    finishSpin();
                }
            }, 100);
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è –∏ –ø–æ–¥—Å—á—ë—Ç –≤—ã–∏–≥—Ä—ã—à–∞
        function finishSpin() {
            const resultSymbols = reels.map(reel => reel.innerText);
            let win = 0;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π
            if (resultSymbols[0] === resultSymbols[1] && resultSymbols[1] === resultSymbols[2]) {
                win = 50;  // –¢—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞
                result.innerText = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} –º–æ–Ω–µ—Ç!`;
            } else if (resultSymbols[0] === resultSymbols[1] || resultSymbols[1] === resultSymbols[2]) {
                win = 20;  // –î–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞ –ø–æ–¥—Ä—è–¥
                result.innerText = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win} –º–æ–Ω–µ—Ç!`;
            } else {
                result.innerText = "–£–¥–∞—á–∞ –Ω–µ –Ω–∞ –≤–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ!";
            }

            balance += win;
            localStorage.setItem("casinoBalance", balance);
            document.getElementById("balance").innerText = `–ë–∞–ª–∞–Ω—Å: ${balance} –º–æ–Ω–µ—Ç`;
            spinButton.disabled = false;
        }

        // –ö–Ω–æ–ø–∫–∞ "–ì–æ—Ç–æ–≤–æ" –¥–ª—è –≤—ã—Ö–æ–¥–∞
        tg.MainButton.setText("–í—ã–π—Ç–∏").show().onClick(() => {
            tg.close();
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        if (balance < 10) {
            spinButton.disabled = true;
            result.innerText = "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –¥–ª—è –∏–≥—Ä—ã!";
        }
    </script>
</body>
</html>